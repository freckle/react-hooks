//@flow
// see https://gist.github.com/thecotne/6e5969f4aaf8f253985ed36b30ac9fe0
type $FlowGen$If<X: boolean, Then, Else = empty> = $Call<
  ((true, Then, Else) => Then) & ((false, Then, Else) => Else),
  X,
  Then,
  Else
>;

type $FlowGen$Assignable<A, B> = $Call<
  ((...r: [B]) => true) & ((...r: [A]) => false),
  A
>;

declare type $ObjMap<T: { ... }, F: (v: any) => any> = $ObjMapi<
  T,
  <K>(
    K
  ) => $FlowGen$If<
    $FlowGen$Assignable<F, (v: $ElementType<T, K>) => R>,
    R,
    empty
  >
>;
export type PrimitiveDep = boolean | string | number | null | void | Symbol;
export type CallbackFn<F> = F;
declare export var unCallbackFn: <F>(fn: F) => F;
declare export function unsafeMkCallbackFn<F: () => any>(f: F): CallbackFn<F>;
export type ExtraDeps<V> =
  | {
      value: V,
      comparator: (a: V, b: V) => boolean,
      ...
    }
  | CallbackFn<V>;
declare export function useExtraDeps<
  S: {
    [key: string]: any,
    ...
  }
>(
  deps: $ReadOnlyArray<PrimitiveDep>,
  extraDeps: S
): {
  allDeps: $ReadOnlyArray<any>,
  extraDepValues: $ObjMap<S, <V>(a: ExtraDeps<V>) => V>,
  ...
};
