//@flow
// see https://gist.github.com/thecotne/6e5969f4aaf8f253985ed36b30ac9fe0
type $FlowGen$If<X: boolean, Then, Else = empty> = $Call<
  ((true, Then, Else) => Then) & ((false, Then, Else) => Else),
  X,
  Then,
  Else
>;

type $FlowGen$Assignable<A, B> = $Call<
  ((...r: [B]) => true) & ((...r: [A]) => false),
  A
>;

import {
  type,
  CallbackFn,
  type,
  ExtraDeps,
  type,
  PrimitiveDep,
} from "./../use-extra-deps";
declare export function useSafeCallback<F: (v: any) => any>(
  f: () => F,
  deps: $ReadOnlyArray<PrimitiveDep>
): CallbackFn<F>;
declare export function useSafeCallbackExtraDeps<
  F: (v: any) => any,
  T: $ObjMapi<
    S,
    <P>(
      P
    ) => $FlowGen$If<
      $FlowGen$Assignable<$ElementType<S, P>, ExtraDeps<R>>,
      R,
      empty
    >
  >,
  S: {
    [key: string]: ExtraDeps<mixed>,
    ...
  }
>(
  f: (a: T) => F,
  deps: $ReadOnlyArray<PrimitiveDep>,
  extraDeps: S
): CallbackFn<F>;
